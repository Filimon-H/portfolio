<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Filimon Hailemariyam â€” Portfolio</title>
  <meta name="description" content="AI/ML & Data Engineering portfolio of Filimon Hailemariyam: projects in RAG, fraud detection, credit scoring, time series dashboards, and data pipelines." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Sen:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b0e14;
      --bg-soft: #0f1422;
      --card: #121826cc; /* glass */
      --text: #e6eefc;
      --muted: #a4b1c9;
      --brand: linear-gradient(135deg,#6ee7f9,#7c3aed 55%, #f472b6);
      --accent: #7c3aed;
      --ring: #6ee7f9;
      --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
      --radius-xl: 24px;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background: radial-gradient(1200px 1200px at 110% -10%, rgba(124,58,237,.25), transparent 50%), radial-gradient(1200px 1200px at -10% 110%, rgba(110,231,249,.15), transparent 50%), var(--bg); color:var(--text); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    .container{width:min(1150px, 92%); margin-inline:auto}
    header.nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(12px); background:linear-gradient(180deg, rgba(11,14,20,.8), rgba(11,14,20,.35)); border-bottom:1px solid rgba(255,255,255,.06)}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px}
    .logo{width:36px; height:36px; border-radius:12px; background:var(--brand); box-shadow:var(--shadow)}
    nav a{opacity:.9; padding:8px 12px; border-radius:12px; transition:.25s ease}
    nav a:hover{background:rgba(255,255,255,.06); opacity:1}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px; background:var(--brand); color:white; font-weight:600; box-shadow:var(--shadow); border:none; cursor:pointer}
    .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,.12)}

    /* Hero */
    .hero{position:relative; padding:78px 0 38px}
    .hero-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:36px; align-items:center}
    .kicker{display:inline-flex; align-items:center; gap:10px; color:var(--muted); font-weight:600; letter-spacing:.2px; font-size:13px; background:rgba(255,255,255,.04); padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.06)}
    .kicker svg{opacity:.9}
    h1{font-family:Sen,Inter,system-ui; line-height:1.08; font-size:clamp(34px, 5vw, 56px); margin:18px 0}
    .lead{font-size:clamp(16px, 2.1vw, 19px); color:#c7d2e5; max-width:62ch}
    .pill-row{display:flex; flex-wrap:wrap; gap:10px; margin:26px 0 34px}
    .pill{padding:8px 12px; border-radius:999px; background:rgba(124,58,237,.15); border:1px solid rgba(124,58,237,.25); color:#e9d5ff; font-size:13px}
    .hero-card{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius-xl); padding:22px; box-shadow:var(--shadow)}

    /* Section */
    section{padding:64px 0}
    .section-title{display:flex; align-items:center; gap:12px; margin:0 0 22px}
    .section-title h2{font-family:Sen,Inter; font-size:clamp(24px,3.6vw,34px); margin:0}
    .section-title .bar{height:10px; width:42px; border-radius:999px; background:var(--brand)}
    .grid{display:grid; gap:20px}

    /* About */
    .about{grid-template-columns: .9fr 1.1fr}
    .about .card{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius-xl); padding:22px; box-shadow:var(--shadow)}
    .stack{display:flex; flex-wrap:wrap; gap:10px}
    .chip{padding:8px 10px; border-radius:12px; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); color:#d6e1f5; font-size:13px}

    /* Projects */
    .projects .grid{grid-template-columns:repeat(12,1fr)}
    .project{grid-column:span 6; position:relative; overflow:hidden; border-radius:20px; background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); padding:18px; box-shadow:var(--shadow); transition:.35s ease}
    .project:hover{transform:translateY(-4px); box-shadow:0 18px 35px rgba(0,0,0,.45)}
    .project h3{margin:10px 0 8px}
    .meta{display:flex; flex-wrap:wrap; gap:8px; color:#a9b7d6; font-size:13px}
    .tags{display:flex; flex-wrap:wrap; gap:8px; margin:12px 0 16px}
    .tag{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); font-size:12px}
    .project .actions{display:flex; gap:10px; margin-top:10px}

    /* Contact */
    .contact-wrap{display:grid; grid-template-columns:1.1fr .9fr; gap:22px}
    form{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius-xl); padding:22px; box-shadow:var(--shadow)}
    .field{display:grid; gap:6px; margin:12px 0}
    label{color:#c8d6ef; font-size:14px}
    input, textarea{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.1); border-radius:14px; padding:12px 14px; color:var(--text); outline:none}
    input:focus, textarea:focus{border-color:var(--ring); box-shadow:0 0 0 3px rgba(110,231,249,.18)}
    textarea{min-height:140px; resize:vertical}
    .contact-card{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius-xl); padding:22px; display:grid; gap:14px; align-content:start}
    .contact-item{display:flex; align-items:center; gap:12px; color:#d4def2}

    /* Footer */
    footer{padding:36px 0 48px; color:#a7b4cd; text-align:center}

    /* Responsive */
    @media (max-width:1000px){
      .hero-grid, .about, .contact-wrap{grid-template-columns:1fr}
      .projects .grid{grid-template-columns:1fr}
      .project{grid-column:span 12}
    }

    /* Decorative blobs */
    .blob{position:absolute; inset:auto; width:420px; height:420px; background:radial-gradient(circle at 30% 30%, rgba(110,231,249,.25), transparent 60%), radial-gradient(circle at 70% 70%, rgba(124,58,237,.25), transparent 60%); filter:blur(40px); opacity:.65; border-radius:50%; pointer-events:none; transform:translate(30%, -10%)}

    /* ===== Chatbot Widget ===== */
    .chat-fab{position:fixed; right:22px; bottom:22px; z-index:60; display:flex; align-items:center; gap:10px}
    .chat-fab button{width:56px; height:56px; border-radius:18px; background:var(--brand); border:none; box-shadow:0 14px 30px rgba(0,0,0,.45); color:#fff; cursor:pointer; display:grid; place-items:center}
    .chat-fab .nudge{background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.14); color:#e6eefd; padding:10px 12px; border-radius:12px; font-size:13px; backdrop-filter:blur(6px)}
    .chat-panel{position:fixed; right:22px; bottom:90px; width:min(380px, 92vw); max-height:70vh; display:none; grid-template-rows:auto 1fr auto; background:linear-gradient(180deg, rgba(18,24,38,.96), rgba(18,24,38,.92)); border:1px solid rgba(255,255,255,.1); border-radius:18px; box-shadow:0 18px 40px rgba(0,0,0,.6); overflow:hidden; z-index:70}
    .chat-panel.open{display:grid}
    .chat-head{padding:12px 14px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,.08)}
    .chat-head b{display:flex; align-items:center; gap:10px}
    .chat-head .dot{width:10px; height:10px; border-radius:999px; background:#22c55e; box-shadow:0 0 0 3px rgba(34,197,94,.25)}
    .chat-log{padding:14px; overflow:auto; display:grid; gap:10px}
    .msg{display:flex; gap:10px; align-items:flex-start}
    .msg .bubble{max-width:78%; padding:10px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.1); background:rgba(255,255,255,.03)}
    .msg.user{justify-content:flex-end}
    .msg.user .bubble{background:rgba(124,58,237,.18); border-color:rgba(124,58,237,.35)}
    .msg.bot .bubble{background:rgba(255,255,255,.04)}
    .msg .avatar{width:28px; height:28px; border-radius:8px; background:var(--brand)}
    .chat-input{display:flex; gap:8px; padding:12px; border-top:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.02)}
    .chat-input textarea{flex:1; resize:none; min-height:44px; max-height:140px; border-radius:12px}
    .send-btn{min-width:90px}
    .typing{font-size:12px; color:#a9b7d6}
    .linkish{color:#a8c5ff; text-decoration:underline; text-underline-offset:2px}
  </style>
</head>
<body>
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#top">
        <div class="logo" aria-hidden="true"></div>
        <span>Filimon Hailemariyam</span>
      </a>
      <nav>
        <a href="#about" aria-label="About section">About</a>
        <a href="#projects" aria-label="Projects section">Projects</a>
        <a href="#contact" class="btn ghost" aria-label="Contact section">Contact</a>
      </nav>
    </div>
  </header>

  <main id="top" class="container">
    <section class="hero">
      <div class="blob" aria-hidden="true"></div>
      <div class="hero-grid">
        <div>
          <span class="kicker">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3l2.09 6.26H21l-5.17 3.76L17.91 21 12 16.97 6.09 21l2.08-7.98L3 9.26h6.91L12 3z" fill="currentColor"/></svg>
            ML Engineer â€¢ Data Engineer â€¢ SysAdmin
          </span>
          <h1>Building practical AI systems that ship.</h1>
          <p class="lead">I design and deploy data products end-to-end: from scraping and pipelines to ML models and clean UIs. Recent work spans RAG chatbots for Ethiopian tax law, fraud detection, credit risk scoring, and analytical APIs powered by dbt and Dagster.</p>

          <div class="pill-row">
            <span class="pill">Python â€¢ FastAPI â€¢ Docker</span>
            <span class="pill">LangChain â€¢ Chroma/FAISS</span>
            <span class="pill">PyTorch/TF â€¢ scikit-learn</span>
            <span class="pill">dbt â€¢ Dagster â€¢ PostgreSQL</span>
            <span class="pill">PyMC â€¢ Time Series</span>
          </div>

          <div style="display:flex; gap:12px; flex-wrap:wrap">
            <a href="#projects" class="btn" aria-label="See projects">View Projects</a>
            <a href="#contact" class="btn ghost" aria-label="Contact me">Contact Me</a>
          </div>
        </div>

        <aside class="hero-card" aria-label="Highlights">
          <h3 style="margin:0 0 10px">Recent Highlights</h3>
          <ul style="margin:0; padding-left:18px; line-height:1.7; color:#d5e0f6">
            <li>RAG chatbot (Ethiopian Tax Law) with persistent memory and vector search.</li>
            <li>Fraud detection pipeline with SHAP explanations and model monitoring.</li>
            <li>Brent Oil change-point dashboard with Bayesian inference (PyMC).</li>
            <li>End-to-end Telegram analytics: scrape â†’ dbt models â†’ FastAPI endpoints.</li>
          </ul>
        </aside>
      </div>
    </section>

    <section id="about">
      <div class="section-title"><div class="bar"></div><h2>About Me</h2></div>
      <div class="grid about">
       
		<div class="card">
          <p style="margin-top:0">
               I am a Machine Learning Engineer skilled in Python, SQL, Pandas, LangChain, and FastAPI, with proven experience building end-to-end ML pipelines, deploying AI systems, and applying data analysis for actionable insights. My work spans time series forecasting, Retrieval-Augmented Generation (RAG), and MLOps-driven deployments using Docker and CI/CD workflows.
          </p>
           <p> With a background in system administration and infrastructure engineering, I bring a unique strength in designing ML solutions that are not only scalable but also secure and reliable. I am passionate about delivering production-ready models that create measurable business impact by bridging data, AI, and resilient infrastructure.
          </p>
         </div>

        <div class="card">
          <h3 style="margin:0 0 10px">Tech I use</h3>
          <div class="stack">
            <span class="chip">Python</span>
            <span class="chip">FastAPI</span>
            <span class="chip">Pandas</span>
            <span class="chip">scikit-learn</span>
            <span class="chip">PyTorch</span>
            <span class="chip">TensorFlow</span>
            <span class="chip">LangChain</span>
            <span class="chip">Chroma</span>
            <span class="chip">FAISS</span>
            <span class="chip">PostgreSQL</span>
            <span class="chip">dbt</span>
            <span class="chip">Dagster</span>
            <span class="chip">Docker</span>
            <span class="chip">PyMC</span>
          </div>
        </div>
      </div>
    </section>

    <section id="projects" class="projects">
      <div class="section-title"><div class="bar"></div><h2>Selected Projects</h2></div>
      <div class="grid">
        <!-- Project 1 -->
        <article class="project">
          <span class="meta">RAG â€¢ LLM â€¢ Vector DB</span>
          <h3>Ethiopian Tax Law Assistant</h3>
          <p>A retrieval-augmented chatbot with ChromaDB + LangChain, persistent conversations, and guardrails. Deployed with FastAPI; docs follow Ready Tensor publication style.</p>
          <div class="tags"><span class="tag">LangChain</span><span class="tag">ChromaDB</span><span class="tag">Groq LLM</span><span class="tag">FastAPI</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/ethiopian-tax-law-assistant" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Get in touch">Hire Me</a>
          </div>
        </article>
        <!-- Project 2 -->
        <article class="project">
          <span class="meta">Fraud â€¢ SHAP â€¢ MLOps</span>
          <h3>E-commerce & Card Fraud Detection</h3>
          <p>End-to-end pipeline: feature engineering, imbalance handling, and SHAP-based interpretability. Packaged into a reusable sklearn Pipeline.</p>
          <div class="tags"><span class="tag">scikit-learn</span><span class="tag">SMOTE</span><span class="tag">SHAP</span><span class="tag">Docker</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/fraud-detection-ecommerce-banking" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Work together">Discuss</a>
          </div>
        </article>
        <!-- Project 3 -->
        <article class="project">
          <span class="meta">Analytics â€¢ ETL â€¢ APIs</span>
          <h3>Telegram Data â†’ Analytics API</h3>
          <p>Scraping with Telethon, data lake â†’ Postgres, dbt models, and FastAPI endpoints for search, channel insights, and product mentions.</p>
          <div class="tags"><span class="tag">Telethon</span><span class="tag">PostgreSQL</span><span class="tag">dbt</span><span class="tag">FastAPI</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/Amharic-E-commerce-Data-Extractor" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Contact">Contact</a>
          </div>
        </article>
        <!-- Project 4 -->
        <article class="project">
          <span class="meta">Bayesian â€¢ Time Series</span>
          <h3>Brent Oil Change-Point Dashboard</h3>
          <p>Bayesian change-point detection with PyMC + interactive React/Flask dashboard. Event overlays and forecasts with toggleable models.</p>
          <div class="tags"><span class="tag">PyMC</span><span class="tag">Flask + React</span><span class="tag">Time Series</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/brent-oil-price-analysis" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Talk details">Letâ€™s Chat</a>
          </div>
        </article>
        <!-- Project 5 -->
        <article class="project">
          <span class="meta">Credit Risk â€¢ MLOps</span>
          <h3>Credit Scoring for Micro-Lending</h3>
          <p>Defined a default proxy, trained models with tracked experiments, and deployed a FastAPI scoring service with Docker + CI/CD.</p>
          <div class="tags"><span class="tag">MLflow (planned)</span><span class="tag">FastAPI</span><span class="tag">Docker</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/Bank_Credit_Scoring" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Discuss project">Discuss</a>
          </div>
        </article>
        <!-- Project 6 -->
        <article class="project">
          <span class="meta">Forecasting â€¢ Optimization</span>
          <h3>Portfolio Optimization w/ LSTM & ARIMA</h3>
          <p>Compared LSTM vs ARIMA for TSLA forecasting, then optimized a TSLA/SPY/BND portfolio with risk metrics and backtests.</p>
          <div class="tags"><span class="tag">LSTM</span><span class="tag">ARIMA</span><span class="tag">MPT</span></div>
          <div class="actions">
            <a class="btn ghost" href="https://github.com/Filimon-H/GMF-investment-portfolio-management" target="_blank" rel="noopener" aria-label="View repo">Repo</a>
            <a class="btn" href="#contact" aria-label="Contact">Contact</a>
          </div>
        </article>
      </div>
    </section>

    <!-- Certifications -->
    <section id="certifications">
      <div class="section-title"><div class="bar"></div><h2>Certifications</h2></div>
      <div class="grid">
        <div style="background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius-xl); padding:22px; box-shadow:var(--shadow)">
          <ul style="margin:0; padding-left:18px; line-height:1.8; color:#d5e0f6">
            <li>10 Academy â€” Program Completion</li>
            <li>RAG Systems Expert â€” ReadyTensor (Agentic AI)</li>
            <li>Programming Using Python â€” Kaggle</li>
            <li>Intro to Machine Learning â€” Kaggle</li>
            <li>AZ-900: Microsoft Azure Fundamentals</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="section-title"><div class="bar"></div><h2>Contact Me</h2></div>
      <div class="contact-wrap">
        <form action="https://formspree.io/f/movlypka" method="POST">
          <div class="field">
            <label for="name">Your name</label>
            <input id="name" name="name" type="text" placeholder="Jane Doe" required />
          </div>
          <div class="field">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="you@example.com" required />
          </div>
          <div class="field">
            <label for="message">Message</label>
            <textarea id="message" name="message" placeholder="Tell me about your projectâ€¦" required></textarea>
          </div>
          <input type="hidden" name="_subject" value="New message from your portfolio" />
          <button class="btn" type="submit">Send Message</button>
        </form>
        <div class="contact-card">
          <div class="contact-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 12.713l-11.99-7.2v12.487c0 .746.61 1.348 1.36 1.348h21.26c.75 0 1.36-.602 1.36-1.348V5.513L12 12.713z"/><path d="M12 11.287l11.99-7.2H.01l11.99 7.2z"/></svg>
            <a href="mailto:filimon3570@gmail.com">filimon3570@gmail.com</a>
          </div>
          <div class="contact-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.02-.24c1.12.37 2.33.57 3.57.57a1 1 0 011 1v3.5a1 1 0 01-1 1C11.61 21 3 12.39 3 2.99a1 1 0 011-1H7.5a1 1 0 011 1c0 1.24.2 2.45.57 3.57a1 1 0 01-.24 1.02l-2.2 2.2z"/></svg>
            <a href="tel:+251923677823">+251923677823</a>
          </div>
          <div class="contact-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4.98 3.5C3.33 3.5 2 4.82 2 6.46v11.08C2 19.18 3.33 20.5 4.98 20.5h14.04c1.65 0 2.98-1.32 2.98-2.96V6.46c0-1.64-1.33-2.96-2.98-2.96H4.98zm11.1 3.04c.53 0 .96.43.96.96 0 .53-.43.96-.96.96a.96.96 0 110-1.92zM12 7.84a4.16 4.16 0 100 8.32 4.16 4.16 0 000-8.32zM12 9.8a2.2 2.2 0 110 4.4 2.2 2.2 0 010-4.4z"/></svg>
            <a href="https://www.linkedin.com/in/filimon-haylemariyam/" target="_blank" rel="noopener">LinkedIn</a>
          </div>
          <div class="contact-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 3.58 8.09 8.2 8.88.6.11.82-.26.82-.58 0-.28-.01-1.03-.02-2.02-3.34.72-4.04-1.61-4.04-1.61-.55-1.4-1.34-1.77-1.34-1.77-1.09-.75.08-.74.08-.74 1.2.09 1.84 1.23 1.84 1.23 1.07 1.83 2.82 1.3 3.5.99.11-.78.42-1.3.76-1.6-2.66-.3-5.47-1.34-5.47-5.97 0-1.32.47-2.39 1.24-3.23-.12-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.23a11.3 11.3 0 016 0c2.29-1.55 3.3-1.23 3.3-1.23.66 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.23 0 4.64-2.81 5.66-5.49 5.95.43.36.81 1.08.81 2.17 0 1.57-.01 2.83-.01 3.21 0 .32.22.7.83.58A8.99 8.99 0 0022 12c0-5.52-4.48-10-10-10z"/></svg>
            <a href="https://github.com/Filimon-H" target="_blank" rel="noopener">GitHub</a>
          </div>
          <p style="margin:4px 0 0; color:#9fb0cf">Based in Ethiopia (UTC+3). Open to remote roles.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>Â© <span id="y"></span> Filimon Hailemariyam â€” Built with semantic HTML and handcrafted CSS.</p>
    </div>
  </footer>

  <!-- ===== Chatbot Floating Button + Panel ===== -->
  <div class="chat-fab" aria-live="polite">
    <div class="nudge" id="chat-nudge">Ask about Filimon?</div>
    <button id="chat-open" aria-label="Open chatbot" title="Ask about Filimon">
      <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h16a2 2 0 012 2v9a2 2 0 01-2 2H8l-4 3V6a2 2 0 012-2z" fill="currentColor"/></svg>
    </button>
  </div>

  <section class="chat-panel" id="chat-panel" aria-label="Chat with Filimon's assistant" role="dialog" aria-modal="true">
    <div class="chat-head">
      <b><span class="dot"></span> Filimon Assistant</b>
      <button id="chat-close" class="btn ghost" aria-label="Close chat">Close</button>
    </div>
    <div class="chat-log" id="chat-log" aria-live="polite" aria-atomic="false"></div>
    <form class="chat-input" id="chat-form">
      <textarea id="chat-text" placeholder="Ask about Filimon, projects, skills, or availabilityâ€¦" rows="1"></textarea>
      <button class="btn send-btn" type="submit" aria-label="Send">Send</button>
    </form>
  </section>

  <script>
    // dynamic year
    document.getElementById('y').textContent = new Date().getFullYear();
    // smooth anchor scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // ===== Chatbot widget logic (with demo mode) =====
    // Leave API_URL empty for demo mode; set to your FastAPI endpoint when ready (e.g., 'https://api.yourdomain.com/chat')
    const API_URL = '';
    const DEMO_MODE = !API_URL;

    const chatPanel = document.getElementById('chat-panel');
    const chatOpen = document.getElementById('chat-open');
    const chatClose = document.getElementById('chat-close');
    const chatLog = document.getElementById('chat-log');
    const chatForm = document.getElementById('chat-form');
    const chatText = document.getElementById('chat-text');
    const nudge = document.getElementById('chat-nudge');

    let history = JSON.parse(localStorage.getItem('fh_chat_history') || '[]');

    function el(tag, opts={}){ const x = document.createElement(tag); Object.assign(x, opts); return x; }
    function scrollToBottom(){ chatLog.scrollTop = chatLog.scrollHeight; }

    function userMsg(html){
      const wrap = el('div', { className:'msg user'});
      const bubble = el('div', { className:'bubble'});
      bubble.innerHTML = html;
      wrap.appendChild(bubble);
      chatLog.appendChild(wrap);
      scrollToBottom();
    }

    function botMsg(html){
      const wrap = el('div', { className:'msg bot'});
      const avatar = el('div', { className:'avatar', ariaHidden:'true'});
      const bubble = el('div', { className:'bubble'});
      bubble.innerHTML = html;
      wrap.appendChild(avatar);
      wrap.appendChild(bubble);
      chatLog.appendChild(wrap);
      scrollToBottom();
    }

    function typing(on){
      let elty = document.getElementById('typing');
      if(on){
        if(!elty){
          elty = el('div', { id:'typing', className:'typing'});
          elty.textContent = 'Thinkingâ€¦';
          chatLog.appendChild(elty);
          scrollToBottom();
        }
      } else if(elty){ elty.remove(); }
    }

    function sanitize(str){
      return str.replace(/[&<>]/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[s]));
    }

    function openChat(){
      chatPanel.classList.add('open');
      chatText.focus();
      if(nudge) nudge.style.display = 'none';
      if(chatLog.children.length === 0){
        botMsg("Hi! ðŸ‘‹ Iâ€™m Filimonâ€™s assistant. What do you want to ask?<br><br>Try:<br>â€¢ What is your RAG stack?<br>â€¢ Show me the fraud detection project.<br>â€¢ Are you open to remote roles?");
      }
    }
    function closeChat(){ chatPanel.classList.remove('open'); }

    if (chatOpen) chatOpen.addEventListener('click', openChat);
    if (chatClose) chatClose.addEventListener('click', closeChat);

    // Auto-expand textarea + Enter to send
    chatText.addEventListener('input', ()=>{
      chatText.style.height = 'auto';
      chatText.style.height = Math.min(chatText.scrollHeight, 140) + 'px';
    });
    chatText.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); chatForm.requestSubmit(); }
    });

    chatForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const text = chatText.value.trim();
      if(!text) return;
      userMsg(sanitize(text));
      chatText.value = '';
      chatText.style.height = '44px';
      typing(true);

      // Demo answers when backend not connected
      const demoResponder = (q)=>{
        const lc = q.toLowerCase();
        if(lc.includes('rag') || lc.includes('assistant')){
          return "Demo: My RAG stack uses LangChain + ChromaDB with Groq LLM, served via FastAPI with guardrails. Ask for â€˜projectsâ€™ or â€˜skillsâ€™.";
        }
        if(lc.includes('project')){
          return "Demo: Projects â†’ Ethiopian Tax Law RAG, Fraud Detection with SHAP, Brent Oil Change-Point Dashboard, Telegram Analytics API.";
        }
        if(lc.includes('skill') || lc.includes('stack')){
          return "Demo: Python, FastAPI, Docker, LangChain, Chroma/FAISS, scikit-learn, PyTorch/TF, dbt, Dagster, PostgreSQL, PyMC.";
        }
        if(lc.includes('available') || lc.includes('hire') || lc.includes('remote')){
          return "Demo: Yes â€” based in Ethiopia (UTC+3), open to remote roles. Contact via the form or email filimon3570@gmail.com.";
        }
        return "Demo: I can answer about Filimonâ€™s skills, projects, and availability. Try: â€˜What is your RAG stack?â€™ or â€˜Show me the fraud projectâ€™.";
      };

      try{
        let data;
        if(DEMO_MODE){
          await new Promise(r=>setTimeout(r, 400)); // simulate latency
          data = { reply: demoResponder(text), sources: [] };
        } else {
          const payload = { message: text, history };
          const res = await fetch(API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          data = await res.json();
        }

        typing(false);
        const reply = (data && data.reply) ? data.reply : 'Sorry, I could not get a response right now.';
        let html = sanitize(reply);

        if(Array.isArray(data?.sources) && data.sources.length){
          const links = data.sources
            .map((s,i)=>`<a class="linkish" href="${s}" target="_blank" rel="noopener">Source ${i+1}</a>`)
            .join(' Â· ');
          html += `<div style="margin-top:6px; font-size:12px; opacity:.9">${links}</div>`;
        }
        botMsg(html);

        // Keep short history (last 10 turns)
        history.push({ role:'user', content:text });
        history.push({ role:'assistant', content:reply });
        if(history.length > 20) history = history.slice(-20);
        localStorage.setItem('fh_chat_history', JSON.stringify(history));
      }catch(err){
        typing(false);
        botMsg('Network error. Please try again.');
        console.error(err);
      }
    });

    // Gentle nudge (optional)
    setTimeout(()=>{
      const n = document.getElementById('chat-nudge');
      if(n && window.matchMedia('(min-width: 600px)').matches){
        n.style.transform='translateY(-2px)'; setTimeout(()=> n.style.transform='', 600);
      }
    }, 1200);
  </script>
</body>
</html>
